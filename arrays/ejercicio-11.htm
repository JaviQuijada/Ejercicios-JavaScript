<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Estructuras de datos: Arrays Ejercicio 11</title>
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <a href="../arrays.html" class="btn-volver">â† Volver al Ã­ndice</a>

        <h1>Ejercicio 11 GerminaciÃ³n</h1>
        <p>Estructuras de datos: Arrays</p>
        <p style="color: var(--secondary-color); margin-top: 0.5rem">
          Crear un programa que permita ingresar una lista de flores (ğŸŒ·) y
          plantines (ğŸŒ±). La lista debe comenzar con una flor, si no lo hace
          debe mostrar un mensaje de error. El programa debe convertir los
          plantines en flores, tomando como referencia la primera flor que
          encuentre a su izquierda. Ejemplo: <br />

          ```javascro[t <br />
          // Ingrese flores y plantines: ğŸŒ·ğŸŒ±ğŸŒ±ğŸŒ±ğŸŒ»ğŸŒ±ğŸŒ±ğŸŒ¸ğŸŒ±ğŸŒ±ğŸŒ±ğŸŒ± <br />
          // Â¡Las flores han germinado!: ğŸŒ·ğŸŒ·ğŸŒ·ğŸŒ·ğŸŒ»ğŸŒ»ğŸŒ»ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸ <br />
          ```
        </p>
      </header>

      <main>
        <button type="button" class="btn-refresh" onclick="location.reload()">
          <span class="icon">â†»</span> Actualizar PÃ¡gina
        </button>
      </main>
    </div>
    <script src="../js/script.js"></script>
    <script>
      let entrada = "";
      let esValido = false;

      // Esta es nuestra "lista blanca" (un simple texto con lo permitido)
      const permitidos = "ğŸŒ·ğŸŒ»ğŸŒ¸ğŸŒºğŸŒ¼ğŸŒ±";

      while (!esValido) {
        entrada = prompt(
          "Introduce flores (ğŸŒ·ğŸŒ»ğŸŒ¸ğŸŒºğŸŒ¼) y plantines (ğŸŒ±), empezando siempre por una flor (Ej: ğŸŒ·ğŸŒ±ğŸŒ±ğŸŒ»ğŸŒ±):"
        );

        if (entrada === null) break;

        const jardinArray = [...entrada]; // Convertimos a array para no romper emojis
        let tieneError = false;

        // 1. Validar que no estÃ© vacÃ­o
        if (jardinArray.length === 0) {
          alert("Â¡No has escrito nada!");
          continue;
        }

        // 2. Validar que empiece con una flor (cualquiera menos el plantÃ­n)
        const primeraPosicion = jardinArray[0];
        if (primeraPosicion === "ğŸŒ±" || !permitidos.includes(primeraPosicion)) {
          alert("âŒ Error: Debe empezar con una flor (ğŸŒ·ğŸŒ»ğŸŒ¸ğŸŒºğŸŒ¼).");
          continue;
        }

        // 3. Validar carÃ¡cter por carÃ¡cter
        for (let i = 0; i < jardinArray.length; i++) {
          let caracterActual = jardinArray[i];

          // Si el caracter actual NO estÃ¡ en nuestra lista de permitidos...
          if (!permitidos.includes(caracterActual)) {
            alert(
              `âŒ Error: El caracter "${caracterActual}" no estÃ¡ permitido.`
            );
            tieneError = true;
            break; // Dejamos de revisar este intento
          }
        }

        // Si pasamos todas las pruebas, salimos del while
        if (!tieneError) {
          esValido = true;
        }
      }

      // LÃ³gica de germinaciÃ³n (solo si es vÃ¡lido)
      if (esValido) {
        let jardin = [...entrada];
        let florReferencia = jardin[0];

        for (let i = 0; i < jardin.length; i++) {
          if (jardin[i] === "ğŸŒ±") {
            jardin[i] = florReferencia;
          } else {
            florReferencia = jardin[i];
          }
        }
        alert("Â¡Germinado!: " + jardin.join(""));
      }
    </script>
  </body>
</html>
