<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Estructuras de datos: Arrays Ejercicio 25</title>
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <a href="../arrays.html" class="btn-volver">â† Volver al Ã­ndice</a>

        <h1>Ejercicio 25 Buscaminas</h1>
        <p>Arrays 2D</p>
        <p style="color: var(--secondary-color); margin-top: 0.5rem">
          Crear un programa que dado un array 2d permita ingresar una coordenada
          (representando los Ã­ndices del array), y mostrar si era una casilla
          vacÃ­a o tenÃ­a una mina. En caso de que tenga una casilla vacÃ­a, debe
          poder seguir jugando e ingresando casillas. Si descubre todas las
          casillas vacÃ­as o elige una con una mina, el juego debe terminar, e
          indicar si perdiÃ³ o ganÃ³. Las minas y casillas vacÃ­as (ocultas y
          descubiertas) pueden representarse con emojis con con nÃºmeros o
          letras. <br />
          ```javascript <br />
          const tablero = <br />
          [ <br />
          ['ğŸ“¦', 'ğŸ’£', 'ğŸ’£'], <br />
          ['ğŸ“¦', 'ğŸ“¦', 'ğŸ“¦'], <br />
          ['ğŸ’£', 'ğŸ“¦', 'ğŸ“¦'] <br />
          ] <br />
          <br />
          ğŸ“¦ ğŸ“¦ ğŸ“¦ <br />
          ğŸ“¦ ğŸ“¦ ğŸ“¦ <br />
          ğŸ“¦ ğŸ“¦ ğŸ“¦ <br />
          <br />
          // Ingrese una coordenada: 0,0 <br />
          // La caja estÃ¡ vacÃ­a! <br />
          <br />
          ğŸ’¨ ğŸ“¦ ğŸ“¦ <br />
          ğŸ“¦ ğŸ“¦ ğŸ“¦ <br />
          ğŸ“¦ ğŸ“¦ ğŸ“¦ <br />
          <br />
          // Ingrese una coordenada: 0,1 <br />
          // Â¡Oh no!Â¡Has encontrado una bomba! <br />
          <br />
          ğŸ’¨ ğŸ’¥ ğŸ“¦ <br />
          ğŸ“¦ ğŸ“¦ ğŸ“¦ <br />
          ğŸ“¦ ğŸ“¦ ğŸ“¦ <br />
          ```
        </p>
      </header>

      <main>
        <button type="button" class="btn-refresh" onclick="location.reload()">
          <span class="icon">â†»</span> Actualizar PÃ¡gina
        </button>
      </main>
    </div>
    <script src="../js/script.js"></script>
    <script>
      // 1. El tablero oculto con las minas (lo que el programa sabe)
      const tablero = [
        ["ğŸ“¦", "ğŸ’£", "ğŸ’£"],
        ["ğŸ“¦", "ğŸ“¦", "ğŸ“¦"],
        ["ğŸ’£", "ğŸ“¦", "ğŸ“¦"],
      ];

      // 2. Necesitamos saber cuÃ¡ntas cajas vacÃ­as ('ğŸ“¦') hay para saber cuÃ¡ndo ganar
      // Usamos .flat() para aplanar la matriz y contar fÃ¡cilmente
      let cajasTotales = tablero
        .flat()
        .filter((casilla) => casilla === "ğŸ“¦").length;

      let juegoTerminado = false;
      let cajasAbiertas = 0;

      // 3. Â¡Empieza el bucle del juego!
      while (!juegoTerminado) {
        let coordenada = prompt(
          `Cajas abiertas: ${cajasAbiertas}/${cajasTotales}\nIngrese coordenada (fila,columna) ejemplo: 0,1`
        );

        if (coordenada === null) {
          alert("Juego cancelado.");
          break;
        }

        // Convertimos "0,1" en los Ã­ndices fila = 0 y columna = 1
        let partes = coordenada.split(",");
        let fila = Number(partes[0]);
        let col = Number(partes[1]);

        // Revisamos quÃ© hay en esa casilla
        let resultado = tablero[fila][col];

        if (resultado === "ğŸ’£") {
          alert("Â¡Oh no! ğŸ’¥ Â¡Has encontrado una bomba! PERDISTE.");
          juegoTerminado = true;
        } else if (resultado === "ğŸ“¦") {
          alert("Â¡La caja estÃ¡ vacÃ­a! ğŸ’¨");
          // Marcamos la casilla como 'abierta' para que no la cuente dos veces
          tablero[fila][col] = "ğŸ’¨";
          cajasAbiertas++;

          // Â¿Ya abrimos todas las que no tenÃ­an bomba?
          if (cajasAbiertas === cajasTotales) {
            alert(
              "Â¡FELICIDADES! ğŸ‰ Has despejado todas las cajas sin explotar."
            );
            juegoTerminado = true;
          }
        } else if (resultado === "ğŸ’¨") {
          alert("Esta casilla ya la habÃ­as abierto. Â¡Prueba otra!");
        }
      }
    </script>
  </body>
</html>
