<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ejercicios con Clases en Javascript Ejercicio 3</title>
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <a href="../clases.html" class="btn-volver">‚Üê Volver al √≠ndice</a>

        <h1>Ejercicio 3 Televisor</h1>
        <p>
          Crear las siguientes clases con sus respectivos m√©todos y propiedades.
          Usar propiedades privadas. Cuando se devuelvan valores, si son objetos
          y arrays de las propiedades, devolver copias de los mismo, para evitar
          que puedan ser modificados.
        </p>
        <p style="color: var(--secondary-color); margin-top: 0.5rem">
          - **Propiedades** <br />
          - `encendido` (booleano), inicializa en `false` <br />
          - `canal` (n√∫mero), inicializa en 0 <br />
          - `canales` (n√∫mero) <br />
          - `volumen` (n√∫mero), inicializa en 0 <br />
          - `marca` (string) <br />
          - **Constructor** <br />
          - pide como argumentos `marca` y `canales` y los asigna a sus
          respectivas propiedades <br />
          - **M√©todos** <br />
          - **`prender()`** pone `encendido` en `true` <br />
          - **`apagar()`** pone `encendido` en `false` <br />
          - **`verCanalSiguiente()`** suma 1 a `canal` y actualiza dicha
          propiedad <br />
          - **`verCanalAnterior()`** resta 1 a `canal` y actualiza dicha
          propiedad <br />
          - **`cambiarCanal(canal)`** actualiza la propiedad `canal` con el
          valor del par√°metro `canal` <br />
          - **`subirVolumen()`** suma 1 a `volumen` y actualiza dicha propiedad
          <br />
          - **`bajarVolumen()`** resta 1 a `volumen` y actualiza dicha propiedad
          <br />
          - **`toString()`** devuelve un *string* como el siguiente ejemplo:
          <br />
          <br />

          ``` <br />
          Televisor Samsung <br />
          - Canales: 100 <br />
          - Canal actual: 23 <br />
          - Volumen actual: 34 <br />
          ``` <br />
          - **Observaciones** <br />
          - solo se puede modificar el canal y el volumen si el televisor se
          encuentra prendido <br />
          - `canales` representa el m√°ximo de canales posibles. Si se est√° en el
          canal m√°ximo o m√≠nimo (0), y se avanza o retrocede, debe dar toda la
          vuelta. P. ej.: si el canal m√°ximo es 100, se est√° en el canal 100, y
          se avanza de canal, debe volver al 0 <br />
          - solo se puede cambiar a un canal que exista <br />
          - el volumen m√≠nimo es 0 y el m√°ximo 100 <br />
        </p>
      </header>

      <main>
        <button type="button" class="btn-refresh" onclick="location.reload()">
          <span class="icon">‚Üª</span> Actualizar P√°gina
        </button>
      </main>
    </div>
    <script src="./js/script.js"></script>
    <script>
      class Televisor {
        // Propiedades privadas
        #encendido = false;
        #canal = 0;
        #canales; // M√°ximo de canales
        #volumen = 0;
        #marca;

        constructor(marca, canales) {
          this.#marca = marca;
          this.#canales = canales;
        }

        // M√©todo privado para validar si est√° encendido antes de operar
        #verificarEncendido() {
          if (!this.#encendido) {
            throw new Error("El televisor est√° apagado. Pr√©ndelo primero.");
          }
        }

        prender() {
          this.#encendido = true;
          console.log("üì∫ Televisor prendido.");
        }

        apagar() {
          this.#encendido = false;
          console.log("üîå Televisor apagado.");
        }

        verCanalSiguiente() {
          this.#verificarEncendido();
          // Si es el √∫ltimo canal, vuelve al 0. Si no, suma 1.
          this.#canal = this.#canal === this.#canales ? 0 : this.#canal + 1;
        }

        verCanalAnterior() {
          this.#verificarEncendido();
          // Si es el canal 0, va al √∫ltimo. Si no, resta 1.
          this.#canal = this.#canal === 0 ? this.#canales : this.#canal - 1;
        }

        cambiarCanal(nuevoCanal) {
          this.#verificarEncendido();
          if (nuevoCanal >= 0 && nuevoCanal <= this.#canales) {
            this.#canal = nuevoCanal;
          } else {
            throw new Error(
              `El canal ${nuevoCanal} no existe. Rango: 0 - ${this.#canales}`
            );
          }
        }

        subirVolumen() {
          this.#verificarEncendido();
          if (this.#volumen < 100) {
            this.#volumen++;
          }
        }

        bajarVolumen() {
          this.#verificarEncendido();
          if (this.#volumen > 0) {
            this.#volumen--;
          }
        }

        obtenerDatos() {
          // Retornamos una copia de las propiedades
          return {
            encendido: this.#encendido,
            canal: this.#canal,
            canales: this.#canales,
            volumen: this.#volumen,
            marca: this.#marca,
          };
        }

        toString() {
          return (
            `Televisor ${this.#marca}\n` +
            `- Canales: ${this.#canales}\n` +
            `- Canal actual: ${this.#canal}\n` +
            `- Volumen actual: ${this.#volumen}`
          );
        }
      }

      // --- Interacci√≥n con el usuario ---

      const marcaTV = prompt("Introduce la marca del televisor:");
      const totalCanales = parseInt(
        prompt("Introduce el n√∫mero m√°ximo de canales:")
      );

      const miTV = new Televisor(marcaTV, totalCanales);

      let ejecutando = true;
      while (ejecutando) {
        const info = miTV.obtenerDatos();
        const menu =
          `${miTV.toString()}\n\n` +
          `Estado: ${info.encendido ? "ENCENDIDO" : "APAGADO"}\n` +
          `1. Prender\n2. Apagar\n3. Canal Siguiente\n4. Canal Anterior\n` +
          `5. Cambiar Canal\n6. Subir Volumen\n7. Bajar Volumen\n8. Salir`;

        const opcion = prompt(menu);

        try {
          switch (opcion) {
            case "1":
              miTV.prender();
              break;
            case "2":
              miTV.apagar();
              break;
            case "3":
              miTV.verCanalSiguiente();
              break;
            case "4":
              miTV.verCanalAnterior();
              break;
            case "5":
              const c = parseInt(prompt("N√∫mero de canal:"));
              miTV.cambiarCanal(c);
              break;
            case "6":
              miTV.subirVolumen();
              break;
            case "7":
              miTV.bajarVolumen();
              break;
            case "8":
            case null:
              ejecutando = false;
              break;
            default:
              alert("Opci√≥n no v√°lida");
          }
        } catch (e) {
          alert("‚ö†Ô∏è " + e.message);
        }
      }
    </script>
  </body>
</html>
